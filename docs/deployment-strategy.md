# 포트폴리오 배포 전략

## 개요

백엔드 부트캠프 수료 후 포트폴리오를 구축하기 위한 배포 전략 문서입니다.

## 아키텍처 개요

```
┌─────────────────────────────────────────────────────────────────────┐
│                           사용자 (브라우저)                            │
└─────────────────────────────────────────────────────────────────────┘
                                    │
                    ┌───────────────┴───────────────┐
                    ▼                               ▼
┌─────────────────────────────┐     ┌─────────────────────────────┐
│        Vercel CDN           │     │       AWS EC2 (t2.micro)    │
│  ┌───────────────────────┐  │     │  ┌───────────────────────┐  │
│  │   Next.js (SSR/SSG)   │  │     │  │        Nginx          │  │
│  │   - 블로그 페이지      │  │     │  │   (Reverse Proxy)     │  │
│  │   - 포트폴리오 페이지  │◄─┼─────┼──│        + SSL          │  │
│  │   - API Routes        │  │     │  └───────────┬───────────┘  │
│  └───────────────────────┘  │     │              │              │
└─────────────────────────────┘     │  ┌───────────▼───────────┐  │
                                    │  │  Gunicorn + Uvicorn   │  │
                                    │  │   (FastAPI App)       │  │
                                    │  │   - REST API          │  │
                                    │  │   - Swagger Docs      │  │
                                    │  └───────────┬───────────┘  │
                                    │              │              │
                                    │  ┌───────────▼───────────┐  │
                                    │  │     PostgreSQL        │  │
                                    │  │   (로컬 설치)          │  │
                                    │  └───────────────────────┘  │
                                    └─────────────────────────────┘
```

## 기술 스택

| 구분 | 기술 스택 | 배포 플랫폼 | 비용 |
|------|----------|-------------|------|
| 프론트엔드 | Next.js + TypeScript + Tailwind CSS | Vercel | 무료 |
| 백엔드 | FastAPI + PostgreSQL | AWS EC2 | 무료 (Free Tier) |

## 프로젝트 구조

```
/home/midiummin/projects/
├── my-blog/              # Next.js 프론트엔드 (Vercel 배포)
│   ├── app/              # App Router (Next.js 14+)
│   ├── components/       # React 컴포넌트
│   ├── content/          # MDX 블로그 포스트
│   ├── lib/              # 유틸리티 함수
│   ├── public/           # 정적 파일
│   └── docs/             # 문서
│
└── portfolio-api/        # FastAPI 백엔드 (AWS EC2 배포)
    ├── app/              # 애플리케이션 코드
    │   ├── api/v1/       # API 엔드포인트
    │   ├── models/       # SQLAlchemy 모델
    │   ├── schemas/      # Pydantic 스키마
    │   └── db/           # 데이터베이스 설정
    ├── alembic/          # DB 마이그레이션
    ├── tests/            # 테스트 코드
    └── .github/workflows/ # CI/CD
```

## 배포 전략 분리 이유

### 프론트엔드 (Vercel)
- **자동 배포**: GitHub 푸시 시 자동 빌드 및 배포
- **글로벌 CDN**: 전 세계 엣지 네트워크로 빠른 응답
- **무료 SSL**: 자동 HTTPS 인증서 발급
- **Preview 배포**: PR마다 미리보기 URL 생성

### 백엔드 (AWS EC2)
- **자유로운 환경**: 서버 설정 완전 제어
- **학습 목적**: AWS 인프라 경험
- **비용 효율**: Free Tier로 12개월 무료
- **확장 가능**: 추후 AWS 서비스 연동 용이

## CI/CD 파이프라인

```
┌─────────────────────────────────────────────────────────────────────┐
│                         GitHub Actions                              │
│  ┌──────────────────┐          ┌──────────────────┐                │
│  │  my-blog repo    │          │ portfolio-api    │                │
│  │  push to main    │          │ push to main     │                │
│  │       ↓          │          │       ↓          │                │
│  │  Vercel 자동     │          │  Test → SSH      │                │
│  │  Deploy          │          │  Deploy to EC2   │                │
│  └──────────────────┘          └──────────────────┘                │
└─────────────────────────────────────────────────────────────────────┘
```

## 구현 순서

1. **인프라 설정**
   - AWS 계정 생성 및 IAM 설정
   - EC2 인스턴스 생성
   - 예산 알림 설정

2. **백엔드 개발 및 배포**
   - FastAPI 프로젝트 초기화
   - PostgreSQL 설정
   - API 개발
   - EC2 배포

3. **프론트엔드 개발 및 배포**
   - Next.js 프로젝트 초기화
   - 핵심 페이지 개발
   - Vercel 배포

4. **연동 및 최적화**
   - 프론트-백 연동
   - SSL 설정
   - SEO 최적화

## 예상 비용

| 항목 | 월 비용 |
|------|---------|
| Vercel Hobby | $0 |
| EC2 t2.micro | $0 (Free Tier) |
| EBS 30GB | $0 (Free Tier) |
| 도메인 (선택) | ~$1 |
| **총합** | **$0 ~ $1** |

## 관련 문서

- [프론트엔드 배포 가이드](./frontend-deployment.md)
- [백엔드 배포 가이드](./backend-deployment.md)
- [AWS Free Tier 활용 가이드](./aws-free-tier-guide.md)
