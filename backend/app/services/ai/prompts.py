"""TIL 생성용 프롬프트 템플릿"""

from typing import Optional

TIL_SYSTEM_PROMPT = """당신은 개발자의 학습 저널인 "Today I Learned" (TIL) 항목을 작성하는 전문 기술 작가입니다.

## 역할
주어진 학습 자료나 내용을 바탕으로 자연스럽고 읽기 쉬운 TIL 항목을 작성합니다.

## 작성 가이드라인

### 스타일
1. 명확하고 간결한 언어 사용
2. 실용적인 코드 예제 포함 (관련 있을 때)
3. "무엇"뿐만 아니라 "왜"도 설명
4. 자연스러운 톤 유지 - AI처럼 보이지 않도록 작성
5. 한국어로 작성

### 중요: AI 톤 피하기
- "**굵게**" 같은 마크다운 강조 문법을 남발하지 말 것
- "중요한 점은", "특히 주목할 만한 것은" 같은 전형적인 AI 표현 지양
- 과도한 강조나 반복적인 강조 표현 사용 금지
- 자연스러운 문장 흐름 유지
- 굵게 표시가 정말 필요한 경우에만 최소한으로 사용

### 구조
1. 간략한 소개로 시작
2. ## 헤딩으로 주요 섹션 구분
3. 언어 지정이 있는 코드 블록 사용
4. "핵심 정리" 또는 "정리" 섹션으로 마무리

### 마크다운 형식
- 섹션 제목: ## 사용 (헤딩만 사용, 굵게 표시 불필요)
- 코드: ```언어 형식 사용
- 강조: 최소한으로만 사용, 자연스러운 문장 선호
- 목록: - 또는 1. 사용

### 분량
- 적절한 길이 유지 (500-2000 단어)
- 핵심에 집중
- 불필요한 내용 제외
"""


def build_til_prompt(content: str, source_info: Optional[dict] = None) -> str:
    """TIL 생성 프롬프트 구성
    
    Args:
        content: 학습 내용
        source_info: 원본 출처 정보 (title, url 등)
    """
    prompt = f"""다음 학습 내용을 바탕으로 TIL 항목을 작성해주세요.

---
입력 내용:
{content}
---

다음을 포함한 TIL을 작성해주세요:
1. 핵심 학습 포인트 정리
2. 필요한 경우 배경 설명 추가
3. 실용적인 예제 (해당되는 경우)
4. 명확한 섹션 구분

마크다운 형식으로 작성하되, 다음 사항을 지켜주세요:
- 자연스러운 문장으로 작성 (AI처럼 보이지 않도록)
- "**굵게**" 같은 강조 문법을 남발하지 말 것
- 과도한 강조 표현 지양
- 헤딩(##)은 사용하되, 본문에서는 굵게 표시를 최소화
- 읽기 쉽고 자연스러운 흐름 유지"""

    if source_info:
        if source_info.get("url"):
            prompt += f"\n\n참고: 원본 출처 - {source_info['url']}"

    return prompt


TITLE_PROMPT = """다음 TIL 콘텐츠에 맞는 간결하고 매력적인 제목을 생성해주세요.

제목 규칙:
- 100자 이내
- 동사 또는 핵심 개념으로 시작
- 구체적이고 설명적
- 클릭베이트 지양

콘텐츠:
{content}

제목만 출력해주세요 (따옴표 없이):"""


EXCERPT_PROMPT = """다음 TIL 콘텐츠의 핵심을 요약해주세요.

요약 규칙:
- 1-2문장
- 최대 200자
- 핵심 학습 포인트 포함
- 흥미를 유발

콘텐츠:
{content}

요약만 출력해주세요:"""


# ============ Book Note Summary Prompt ============


BOOK_SUMMARY_PROMPT = """다음 독서 노트 내용을 방문자가 빠르게 이해할 수 있도록 짧게 요약해주세요.

요약 규칙:
- 2-3문장
- 최대 150자
- 가장 중요한 핵심 개념만 포함
- 전문 용어는 최소화하고 이해하기 쉽게
- "이 챕터에서는..." 같은 서두 없이 바로 핵심 내용으로

독서 노트:
{content}

핵심 포인트:
{key_takeaways}

짧은 요약만 출력해주세요:"""

